{"version":3,"sources":["assets/testPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UISuperLayout, { UISuperAxis } from './UISuperLayout';\nimport item from './item';\nimport UISpuerScrollView from './UISuperScrollView';\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class testPanel extends cc.Component {\n\n    @property(UISuperLayout) layout: UISuperLayout = null\n    @property(cc.Node) header: cc.Node = null\n    @property(cc.Node) refreshing: cc.Node = null\n    @property(cc.Node) footer: cc.Node = null\n    @property(cc.Node) loading: cc.Node = null\n    private isRandomHeight: boolean = false\n    private isRandomWidth: boolean = false\n    // 模拟数据总数\n    private total: number = 0\n    private datas: any[] = []\n\n    onLoad() {\n        for (let i = 0; i < this.total; i++) {\n            this.datas.push({\n                title: `${i}`,\n                randomWidth: 100 * (1 + Math.random()),\n                randomHeight: 100 * (1 + Math.random()),\n            })\n        }\n        this.layout.total(this.datas.length)\n    }\n    // 刷新数据\n    refreshItemEvent(node: cc.Node, index: number) {\n        let info = this.datas[index]\n        if (this.isRandomHeight) {\n            node.height = info.randomHeight\n        }\n        if (this.isRandomWidth) {\n            node.width = info.randomWidth\n        }\n        node.getComponent(item).show(info, index, this.onRemoveItem.bind(this))\n    }\n\n    toHeader() {\n        this.layout.scrollToHeader(0.5)\n    }\n    toFooter() {\n        this.layout.scrollToFooter(0.5)\n    }\n    addItem() {\n        // 测试代码 添加数据\n        this.datas.push({\n            title: `${this.datas.length}`,\n            randomWidth: 100 * (1 + Math.random()),\n            randomHeight: 100 * (1 + Math.random()),\n        })\n        cc.log(\"添加数据 当前总数:\", this.datas.length)\n        this.layout.total(this.datas.length)\n    }\n    remItem() {\n        // 测试代码 删除数据\n        this.datas.pop()\n        cc.log(\"删除数据 当前总数:\", this.datas.length)\n        this.layout.total(this.datas.length)\n    }\n\n    randomHeight() {\n        // 测试代码 随机尺寸\n        this.isRandomHeight = !this.isRandomHeight\n        this.toHeader()\n    }\n    randomWidth() {\n        // 测试代码 随机尺寸\n        this.isRandomWidth = !this.isRandomWidth\n        this.toHeader()\n    }\n    /**\n    * 下拉刷新\n    * 核心代码 请看 第一步 第二步 其余的都是一些的效果测试代码 你可以自己实现任何效果\n    */\n\n    pullDownRefresh(scroll: UISpuerScrollView, event: { refresh: boolean, progress: number }) {\n        // 模拟代码  一些UI效果\n        this.playAnim(this.header, event, '松开刷新哦', '继续滑')\n\n        // event.refresh=true 代表需要刷新数据\n        if (event.refresh) {\n            cc.log(\"开始异步刷新数据\")\n            this.refreshing.active = true\n            // 第一步  模拟刷新数据\n            for (let i = 0; i < this.datas.length; i++) {\n                const data = this.datas[i];\n                this.datas[i].title = `${data.title} - ${i}`\n            }\n            // 模拟异步延迟\n            setTimeout(() => {\n                this.refreshing.active = false\n                // 第二步 刷新\n                cc.log(\"刷新成功！\")\n                this.layout.total(this.datas.length)\n            }, 1000)\n        }\n    }\n    /**\n     * 上拉加载\n     * 核心代码 请看 第一步 第二步 其余的都是一些的效果测试代码 你可以自己实现任何效果\n     */\n    pullUpLoad(scroll: UISpuerScrollView, event: { refresh: boolean, progress: number }) {\n        // 模拟代码 一些UI效果\n        this.playAnim(this.footer, event, '松开加载更多', '继续滑')\n        // event.refresh=true 代表需要加载数据\n        if (event.refresh) {\n            cc.log(\"开始异步加载10条数据\")\n\n            this.loading.active = true\n            // 第一步  模拟增加10条数据\n            for (let i = 0; i < 10; i++) {\n                this.datas.push({\n                    title: `${this.datas.length}`,\n                    randomWidth: 100 * (1 + Math.random()),\n                    randomHeight: 100 * (1 + Math.random()),\n                })\n            }\n            // 模拟异步延迟加载\n            setTimeout(() => {\n                this.loading.active = false\n                // 第二步 刷新\n                cc.log(\"数据加载成功！\")\n                this.layout.total(this.datas.length)\n            }, 1000)\n        }\n    }\n    onRemoveItem(index: number) {\n        // 删除点击的那条数据\n        this.datas.splice(index, 1)\n        // 刷新\n        this.layout.total(this.datas.length)\n    }\n\n    /** 测试代码 */\n    private playAnim(node: cc.Node, event: { refresh: boolean, progress: number }, msg1: string, msg2: string) {\n        node.opacity = event.progress * 255\n        let scale = this.layout.startAxis == UISuperAxis.VERTICAL ? cc.v2(1, event.progress) : cc.v2(event.progress, 1)\n        if (event.progress >= 1) {\n            node.getComponentInChildren(cc.Label).string = msg1\n        } else {\n            node.getComponentInChildren(cc.Label).string = msg2\n        }\n        if (event.progress >= 1.3) {\n            if (!node['playing']) {\n                node.runAction(cc.scaleTo(0.618, 1, 1).easing(cc.easeElasticOut(0.236)))\n                node['playing'] = true\n            }\n        } else {\n            node.stopAllActions()\n            node['playing'] = false\n            node.setScale(scale)\n        }\n    }\n\n}\n"]}