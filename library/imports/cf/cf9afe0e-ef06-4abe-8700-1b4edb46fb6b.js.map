{"version":3,"sources":["assets/UISuperScrollView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UISuperLayout from './UISuperLayout';\nconst { ccclass, property } = cc._decorator;\nconst EPSILON = 1e-4;\n@ccclass\nexport default class UISpuerScrollView extends cc.ScrollView {\n    @property({\n        displayName: \"顶部偏移量\",\n        tooltip: \"下拉时超过此偏移会发送下拉事件\"\n    }) headerOutOffset: number = 200\n    @property({\n        displayName: \"顶部高度\",\n        tooltip: \"当下拉事件触发时 顶部追加的高度\"\n    }) headerHeight: number = 100\n\n    @property({\n        displayName: \"底部偏移量\",\n        tooltip: \"上拉时超过此偏移会发送上拉事件\"\n    }) footerOutOffset: number = 200\n\n    @property({\n        displayName: \"底部高度\",\n        tooltip: \"当上拉事件触发时 底部追加的高度\"\n    }) footerHeight: number = 100\n    @property({\n        type: cc.Component.EventHandler,\n        displayName: \"下拉事件\"\n    }) pullDownEvents: cc.Component.EventHandler[] = []\n    @property({\n        type: cc.Component.EventHandler,\n        displayName: \"上拉事件\"\n    }) pullUpEvents: cc.Component.EventHandler[] = []\n\n    private _outOfBoundaryAmountDirty: boolean\n    public deltaMove = cc.Vec2.ZERO\n    public get view(): cc.Node { return this['_view'] }\n    public set autoScrolling(value: boolean) { this['_autoScrolling'] = value }\n    public get autoScrolling() { return this['_autoScrolling'] }\n    private isMoveHeader: boolean = false\n    private isMoveFooter: boolean = false\n    private isLockHeader: boolean = false\n    private isLockFooter: boolean = false\n    private isAutoBack: boolean = false\n    private isEmitProgress: boolean = false\n    private contentOriginPos: cc.Vec2 = null\n    private releaseing: boolean = false\n    private _layout: UISuperLayout = null\n    private get layout(): UISuperLayout {\n        if (this._layout == null) {\n            this._layout = this.content.getComponent(UISuperLayout)\n        }\n        return this._layout\n    }\n    private get isHeader() {\n        if (this.layout?.header) {\n            return this.layout?.header['index'] == 0\n        }\n        return true\n    }\n    private get isFooter() {\n        if (this.layout?.footer) {\n            return this.layout.footer['index'] == this.layout.maxItemTotal - 1\n        }\n        return true\n    }\n    /** 是否需要计算？如果上拉/下拉事件没有监听者则不需要相关的计算 */\n    public get isCalculPull() {\n        return this.pullDownEvents.length > 0 || this.pullUpEvents.length > 0\n    }\n    public calculateBoundary() {\n        this['_calculateBoundary']()\n    }\n    public getHowMuchOutOfBoundary(offset?: cc.Vec2) {\n        return this['_getHowMuchOutOfBoundary'](offset)\n    }\n    public release() {\n        if (this.isLockHeader || this.isLockFooter) {\n            this.isMoveHeader = false\n            this.isMoveFooter = false\n            this.isLockHeader = false\n            this.isLockFooter = false\n            this.isEmitProgress = true\n            this.releaseing = true\n            this._outOfBoundaryAmountDirty = true\n            this['_processInertiaScroll']()\n        }\n    }\n    public stopAutoScroll() {\n        super['stopAutoScroll']()\n        this.clearProgress()\n        this.isEmitProgress = false\n    }\n    private _adjustContentOutOfBoundary() {\n        this._outOfBoundaryAmountDirty = true;\n        if (this['_isOutOfBoundary']()) {\n            let outOfBoundary = this.getHowMuchOutOfBoundary(cc.v2(0, 0));\n            let newPosition = this.getContentPosition().add(outOfBoundary);\n            if (!this.contentOriginPos) {\n                this.contentOriginPos = newPosition\n            }\n            if (this.content) {\n                this.content.setPosition(newPosition);\n                this._updateScrollBar(0);\n            }\n            if (this.contentOriginPos.fuzzyEquals(newPosition, EPSILON)) {\n                this.layout.setHeaderStartPos()\n            }\n        }\n    }\n    /**\n     * 重置列表\n     * 当列表滑动到底部时 然后不管通过什么方式(同步|异步)减少了整体的(高度|缩放|尺寸) 时保证内容显示正确\n     */\n    public reset() {\n        this._outOfBoundaryAmountDirty = true\n        let offset = this.getHowMuchOutOfBoundary()\n        if (!offset.fuzzyEquals(cc.v2(0, 0), EPSILON)) {\n            if (!this.releaseing) {\n                this.clearProgress()\n                this.isEmitProgress = false\n            }\n            this['_processInertiaScroll']()\n        }\n    }\n    private _onTouchMoved(event: cc.Event.EventTouch, captureListeners) {\n        super['_onTouchMoved'](event, captureListeners)\n        let delta = cc.v2(event.getLocation().x - event.getPreviousLocation().x, event.getLocation().y - event.getPreviousLocation().y)\n        if (this.vertical && delta.y != 0 || this.horizontal && delta.x != 0) {\n            this.deltaMove = delta\n        }\n        this.isAutoBack = false\n        // 判断是否需要计算\n        if (this.isCalculPull) {\n            this.isEmitProgress = true\n            let outOfBoundary = this.getHowMuchOutOfBoundary()\n            let offset = this.vertical ? outOfBoundary.y : -outOfBoundary.x\n            if (offset > 0 && this.isHeader) {\n                this.isMoveHeader = offset >= this.headerOutOffset\n            } else if (offset < 0 && this.isFooter) {\n                this.isMoveFooter = offset <= -this.footerOutOffset\n            }\n        }\n    }\n    private _dispatchEvent(event) {\n        super['_dispatchEvent'](event)\n        if (event == 'scroll-ended') {\n            this.deltaMove = cc.Vec2.ZERO\n            this.isMoveHeader = false\n            this.isMoveFooter = false\n            this.isAutoBack = false\n            this.isEmitProgress = false\n            this.releaseing = false\n        }\n    }\n    private _getContentTopBoundary() {\n        let viewSize = this.view.getContentSize()\n        let local = 0\n        \n        if (this.layout?.header && this.layout.getReallySize().height > viewSize.height) {\n            local = this.layout.headerBoundaryY + this.layout.paddingTop\n        } else {\n            local = this._getContentBottomBoundary() + viewSize.height\n        }\n        if (this.isHeader && this.isLockHeader) {\n            local += this.headerHeight\n        }\n        return local\n    }\n    private _getContentBottomBoundary() {\n        let viewSize = this.view.getContentSize()\n        let local = 0\n  \n        if (this.layout?.footer && this.layout.getReallySize().height > viewSize.height) {\n            local = this.layout.footerBoundaryY - this.layout.paddingBottom\n        } else {\n            local = this.layout.node.y - this.layout.node.getAnchorPoint().y * viewSize.height;\n        }\n        if (this.isFooter && this.isLockFooter) {\n            local -= this.footerHeight\n        }\n        return local\n    }\n    private _getContentLeftBoundary() {\n        let viewSize = this.view.getContentSize()\n        let local = 0\n        if (this.layout?.header && this.layout.getReallySize().width > viewSize.width) {\n            local = this.layout.headerBoundaryX - this.layout.paddingLeft\n        } else {\n            local = this.layout.node.x - this.layout.node.getAnchorPoint().x * viewSize.width;\n        }\n        if (this.isHeader && this.isLockHeader) {\n            local -= this.headerHeight\n        }\n        return local\n    }\n    private _getContentRightBoundary() {\n        let viewSize = this.view.getContentSize()\n        let local = 0\n        if (this.layout?.footer && this.layout.getReallySize().width > viewSize.width) {\n            local = this.layout.footerBoundaryX + this.layout.paddingRight\n        } else {\n            local = this._getContentLeftBoundary() + viewSize.width\n        }\n        if (this.isFooter && this.isLockFooter) {\n            local += this.footerHeight\n        }\n        return local\n    }\n    private _startAutoScroll(deltaMove, timeInSecond, attenuated) {\n        if (this.isCalculPull) {\n            if (this.isMoveHeader && !this.isLockHeader) {\n                this.isLockHeader = true\n                this.vertical && (deltaMove.y -= this.headerHeight)\n                this.horizontal && (deltaMove.x += this.headerHeight)\n                this.emitPullDownEvent({ refresh: true, progress: 1 })\n            }\n            if (this.isMoveFooter && !this.isLockFooter) {\n                this.isLockFooter = true\n                this.vertical && (deltaMove.y += this.footerHeight)\n                this.horizontal && (deltaMove.x -= this.footerHeight)\n                this.emitPullUpEvent({ refresh: true, progress: 1 })\n            }\n        }\n        super['_startAutoScroll'](deltaMove, timeInSecond, attenuated)\n    }\n\n    private _isNecessaryAutoScrollBrake() {\n        let result = super['_isNecessaryAutoScrollBrake']()\n        if (result) {\n            this.isAutoBack = true\n        }\n        return result\n    }\n    private _updateScrollBar(outOfBoundary) {\n        super['_updateScrollBar'](outOfBoundary)\n        if (!this.isCalculPull) return\n        // 自动回弹时不发送事件 只有在手动滑动时才触发\n        if (this['_autoScrollBraking']) {\n            this.clearProgress()\n            this.isAutoBack = true\n        }\n        if (this.isAutoBack) return\n        let offset = this.vertical ? outOfBoundary.y : -outOfBoundary.x\n        if (offset > 0 && this.isHeader && !this.isLockHeader) {\n\n            let progress = offset < EPSILON ? 0 : offset / this.headerOutOffset\n            this.emitPullDownEvent({ refresh: false, progress: progress })\n            this.emitPullUpEvent({ refresh: false, progress: 0 })\n        } else if (offset < 0 && this.isFooter && !this.isLockFooter) {\n\n            let progress = -offset < EPSILON ? 0 : -offset / this.footerOutOffset\n            this.emitPullUpEvent({ refresh: false, progress: progress })\n            this.emitPullDownEvent({ refresh: false, progress: 0 })\n        } else {\n            this.clearProgress()\n        }\n\n    }\n    private clearProgress() {\n        this.emitPullDownEvent({ refresh: false, progress: 0 })\n        this.emitPullUpEvent({ refresh: false, progress: 0 })\n    }\n    private emitPullDownEvent(data: any) {\n        if (this.isEmitProgress) {\n            cc.Component.EventHandler.emitEvents(this.pullDownEvents, this, data)\n        }\n    }\n    private emitPullUpEvent(data: any) {\n        if (this.isEmitProgress) {\n            cc.Component.EventHandler.emitEvents(this.pullUpEvents, this, data)\n        }\n    }\n}\n"]}